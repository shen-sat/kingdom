pico-8 cartridge // http://www.pico-8.com
version 18
__lua__
function _init()
  game = {}
  run_level()
end

function _update() game.update() end

function _draw() game.draw() end

function run_level()
  ground_y = 128 - 32
  camera_x = 0
  map_start_x = 0
  map_end_x = 256
  
  player = {
   sprite = 0,
   x = 64,
   y = ground_y - 8,
   width = 8,
   height = 8
  }

  cam = {
   x = 0,
   width = 128
  } 

  game.update = level_update
  game.draw = level_draw
end

function level_update()
 --player
 if btn(0) then player.x -= 2 end
 if btn(1) then player.x += 2 end
 if btn(2) then player.y -= 2 end
 if btn(3) then player.y += 2 end
 manage_out_of_bounds(player)
 --camera
 cam.x = player.x - 64 + (player.width/2)
 manage_out_of_bounds(cam)
 camera(cam.x,0)
end

function level_draw()
 cls()
 map(0,0)
 spr(player.sprite,player.x,player.y)
end

function manage_out_of_bounds(obj)
 if obj.x < map_start_x then obj.x = map_start_x end
 if obj.x + obj.width > map_end_x then obj.x = (map_end_x - obj.width) end 
end

__gfx__
1a1a919133333333cccccccc0001010007133100eeeeeeee00000000000000000000000000000000000000000000000000000000000000000000000000000000
1aaa999133333333cccccccc0016161001733310eeeeeeee00000000000000000000000000000000000000000000000000000000000000000000000000000000
1999999133333333cccccccc0016161013333331eeeeeeee00000000000000000000000000000000000000000000000000000000000000000000000000000000
1444442133333333cccccccc0016161014444421eeeeeeee00000000000000000000000000000000000000000000000000000000000000000000000000000000
1441441133333333cccccccc0116616114414411eeeeeeee00000000000000000000000000000000000000000000000000000000000000000000000000000000
1444442133333333cccccccc1666666114444421eeeeeeee00000000000000000000000000000000000000000000000000000000000000000000000000000000
1444422133333333cccccccc1666dd1014444221eeeeeeee00000000000000000000000000000000000000000000000000000000000000000000000000000000
0141121033333333cccccccc161d161001411210eeeeeeee00000000000000000000000000000000000000000000000000000000000000000000000000000000
__map__
0202020202020202020202020202020202020202020202020202020202020202000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0202020202020202020202020202020202020202020202020202020202020202000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0202020202020202020202020202020202020202020202020202020202020202000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0202020202020202020202020202020202020202020202020202020202020202000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0202020202020202020202020202020202020202020202020202020202020202000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0202020202020202020202020202020202020202020202020202020202020202000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0202020202020202020202020202020202020202020202020202020202020202000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0202020202020202020202020202020202020202020202020202020202020202000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0202020202020202020202020202020202020202020202020202020202020202000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0202020202020202020202020202020202020202020202020202020202020202000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0202020202020202020202020202020202020202020202020202020202020202000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0202020202020202020201020201020202020202020202020202010202010202000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0101010101010101010101010101010101010101010101010101010101010101000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0101010101010101010101010101010101010101010101010101010101010101000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0101010101010101010101010101010101010101010101010101010101010101000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0101010101010101010101010101010101010101010101010101010101010101000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
